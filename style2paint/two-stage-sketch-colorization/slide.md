

# 導入

> 良い感じのお絵描きの補助ツールが欲しい！（友人談）  

最近ですと、ClipStudio Paint Pro/Ex が **自動着彩機能** を beta 版で利用可能になるなど、 **お絵描き支援に関する研究** が **市場価値** を生んでいますね（学術的にどうかって？医療データでもない深層学習にお金が下りると思ってんの？）。  

そんなわけでスケッチtoイラストみたいな研究論文が海外や国内企業ではそれなりに数が出ているわけなんですが、その中でも即プロダクトに活かせる程度に高度なものとして [style2paint][style2paint] というものがあります。これはラフ画からい感じに着彩するというまさに文脈通りの機能を実現するためのもので、実際に対話型のソフトウェアが構築されたものです。これはバージョンが存在しており、2019年6月時点で最新となっているのは v4 です。これに関する論文が、[Two-stage Sketch Colorization][Two-stage Sketch Colorization] というものです。  

個人的な導入はともかくとして、簡単に論文で述べられている導入の方に踏み込んでみましょう。  

> 着彩って難しくて時間かかるし、説得力のある絵を書くには、絵師でも苦労するよね。初心者の人にはお手本となるような、絵師さんには沢山の色の組み合わせを試せるような(例えば髪の色をちょっと変えてみたりとか)仕組みを作る必要があると思うんだ。  
> 
> でも着彩にの自動化をしようと思ったら結構多くの課題があって、例えば主題を制限していない状態でのスケッチ画をモデルに理解してもらうのは至難の業だし、スケッチ画は線画に比べれば大分抽象化されているからそこの差を埋めるようにしないといけない、テクスチャとかシェーディングみたいな情報も描かれていないからそれの推測もしなくちゃぁいけない。  
> 
> ところで最近だと深層学習の技術が発展してきて、[Comicolorization][Comicolorization] なんかの技術が便利な着彩補助の関連研究として出てきているね。でもこいつらはにじみとか色の間違いとかが普通にあったりするんだ。これらを修正できるようにしなきゃいけないんだけど、スケッチ->着彩の間に僕たちユーザは上手いこと手を出すことが出来ていなくて、結局自動着彩の技術よりも手打ちの着彩の方がまだまだ人気という感じなんだ。  
> 
> そんなわけで僕たちは自動着彩じゃなくて半自動着彩のフレームワークを提案するよ。半自動というのはどういうことかっていうと、ユーザが着彩結果をちょいちょい弄って修正できるようにしているっていう意味、つまりスケッチ->着彩(1)->ユーザの修正->着彩(2)->&#x2026;->着彩(マスター) みたいなことをしたいってことだね。  
> 提案したフレームワークは、２段階に別れたCNNベースのもので、一つ目は簡単に色をちらして色の概略図みたいなものを作るもの、もう一つはそこから間違いや変な質感になっているものなんかを修正して細かいところを詰めていくものになっているよ。繰り返しになるかもしれないけど、つまりスケッチｰ>着彩という問題をより単純な２つのタスクに分離したってことだね。これによってモデルの学習が効率化して、そのモデルが堅牢なものになったことがわかったよ。更に言うと、既存の着彩補助に関する手法で得られた着彩画を修正することもできることがわかったんだ。  
> 
> それで現実世界でうまく適用できるか試すためにGUIアプリを作ってユーザに使ってもらったんだけど、この手法は2段階に分かれているとはいえ、ユーザが途中結果を見ながら修正ができることなんかも相まって、ユーザからの満足度は高かったよ。  
> 
> 評価として用いた手法が、実アプリケーションを用いたユーザアンケートだよ。これによって既存手法より良いということを示しています。  
> 
> 最後に簡単に僕達が出来たことをまとめるとこんな感じになるよ。  
> 
> 1.  実世界で作られているスケッチから高品質な着彩ができる2段階の着彩モデルを作ったよ
> 2.  僕たちの提案した手法は、既存の手法と比較して着彩の誤り修正が容易でより高品質な着彩結果を得ることができるようになったよ
> 3.  実際にユーザに使ってもらえるように、実アプリケーションを作ってみたよ


# 関連研究


# モデル概要


## Stage 1


## Stage 2


# 評価


# 感想

僕はあんまり画像系の研究はしていないんですが、この論文はとても読みやすい部類であったと思います。これも潜在空間をうまく使って研究しているような感じで、最近読んだ [TransGaGa][TransGaGa] の技術を組み合わせるとか [Glow][Glow] を参考に潜在表現の構築手法をアップデートするとか、Second Stage を強化学習の分野に持ち込んでみるとか、色々研究していみたいテーマが見える面白い分野だなぁと思いました。（小並感・２分位でぱっと提案した感）  

ClipStudioさん とか Pixiv さんとか PFN さんとかで研究してくれないかなぁ（チラッチラッ）  

